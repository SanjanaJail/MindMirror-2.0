<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ğŸ§  MindMirror â€“ Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- âœ… LOGOUT BUTTON -->
<button onclick="logout()" class="logout-btn">
    ğŸšª Logout
</button>
<button onclick="window.location.href='/profile'" class="logout-btn" style="right: 120px; background: linear-gradient(135deg, #6a11cb, #2575fc);">
    â† Profile Hub
</button>

<div class="container">
  <h1>ğŸ§  MindMirror 2.0</h1>
  <p>Track your emotions with AI-powered analysis.</p>

  <!-- Journal Input -->
  <textarea id="journal" placeholder="ğŸ“ Write your journal entry here..."></textarea>

  <!-- Audio Upload -->
  <label class="file-label">ğŸµ Upload Audio
    <input type="file" id="audio" accept="audio/*">
  </label>

  <!-- ğŸ¤ Live Recording -->
  <div class="recorder">
    <button id="startRec">ğŸ™ Start Recording</button>
    <button id="stopRec" disabled>â¹ Stop</button>
    <p id="recStatus">Not recording</p>
  </div>

  <!-- Analyze Button -->
  <button id="analyzeBtn">ğŸ” Analyze Mood</button>
  
  <!-- Loading Spinner -->
  <div id="loading" class="hidden">
    <div class="spinner"></div>
    <p>AI is analyzing your emotions... ğŸ§ </p>
  </div>

  <!-- Results Section -->
  <div id="results" class="hidden">
    <h2>âœ¨ Analysis Results âœ¨</h2>
    <div class="card">
      <strong>ğŸ“ Journal Emotion:</strong> <span id="textEmotion"></span>
      <small>(Confidence: <span id="textConf"></span>)</small>
    </div>
    <div class="card">
      <strong>ğŸ¤ Audio Emotion:</strong> <span id="audioEmotion"></span>
      <small>(Confidence: <span id="audioConf"></span>)</small>
    </div>
    <div class="final-mood glow">
      ğŸŒˆ <strong>Final Mood:</strong> <span id="finalMood"></span>
    </div>

    <!-- âœ… NEW: Get Therapy Button -->
    <button id="getTherapyBtn" class="therapy-btn">
      ğŸ¯ Get Personalized Therapy Plan
    </button>

    <!-- Quick Stats -->
    <div style="text-align: center; margin-top: 20px;">
      <button onclick="window.location.href='/history'" class="auth-btn secondary">
        ğŸ“Š View Full History
      </button>
    </div>
  </div>

  <!-- âœ… NEW: Therapeutic Intervention Section -->
  <div id="therapySection" class="hidden">
    <h2>ğŸ¯ Your Personalized Therapy Plan</h2>
    
    <!-- Immediate Relief -->
    <div class="therapy-category">
      <h3>ğŸš¨ Immediate Relief (5-15 min)</h3>
      <div id="immediateRelief" class="therapy-items"></div>
    </div>
    
    <!-- Daily Practices -->
    <div class="therapy-category">
      <h3>ğŸ“… Daily Practices</h3>
      <div id="dailyPractices" class="therapy-items"></div>
    </div>
    
    <!-- Lifestyle Recommendations -->
    <div class="therapy-category">
      <h3>ğŸ Lifestyle Tips</h3>
      <div id="lifestyleTips" class="therapy-items"></div>
    </div>
    
    <!-- Therapeutic Insight -->
    <div class="therapy-category">
      <h3>ğŸ’¡ Psychological Insight</h3>
      <div id="therapeuticInsight" class="therapy-insight"></div>
    </div>
  </div>

  <!-- âœ… NEW: Navigation Tabs -->
  <div class="nav-tabs">
    <button class="nav-btn" onclick="window.location.href='/insights'">
      <span class="nav-icon">ğŸ“Š</span>
      Personal Insights
    </button>
    <button class="nav-btn" onclick="window.location.href='/burnout'">
      <span class="nav-icon">ğŸš¨</span>
      Burnout Risk
    </button>
    <button class="nav-btn" onclick="window.location.href='/simulator'">
      <span class="nav-icon">ğŸ¤–</span>
      Digital Twin
    </button>
    <button class="nav-btn" onclick="window.location.href='/forecast'">
      <span class="nav-icon">ğŸ“ˆ</span>
      Mood Forecast
    </button>
  </div>
</div>

<script src="script.js"></script>

<!-- âœ… LOGOUT FUNCTION -->
<script>
function logout() {
    if (confirm('Are you sure you want to logout?')) {
        window.location.href = '/logout';
    }
}
</script>

</body>
</html>